#!/bin/tcsh
#SBATCH --time=16:00:00
#SBATCH --ntasks=$NUMGROUPS
#SBATCH --mem=96gb
#SBATCH --account=$HPC_ACCOUNT
#SBATCH --partition=thomas
#SBATCH --mail-type=END,FAIL

setenv PWD $PWD
setenv FULL_GAF_FILES_PATH $FULL_GAF_FILES_PATH
setenv TAXON_ID_PATH $TAXON_ID_PATH
setenv IDENTIFIER_PATH $IDENTIFIER_PATH
setenv GENE_PATH $GENE_PATH
setenv FULL_BASE_PATH $FULL_BASE_PATH
setenv PANTHER_VERSION $PANTHER_VERSION

srun scripts/fullGoMappingPthrHierarchy_para.csh
wait
cat $FULL_BASE_PATH/Pthr_GO_$PANTHER_VERSION.tsv.* > $FULL_BASE_PATH/Pthr_GO_$PANTHER_VERSION.tsv
cat $FULL_BASE_PATH/GOWithHierarchy-BP-$PANTHER_VERSION.dat.* > $FULL_BASE_PATH/GOWithHierarchy-BP-$PANTHER_VERSION.dat
cat $FULL_BASE_PATH/GOWithHierarchy-MF-$PANTHER_VERSION.dat.* > $FULL_BASE_PATH/GOWithHierarchy-MF-$PANTHER_VERSION.dat
cat $FULL_BASE_PATH/GOWithHierarchy-CC-$PANTHER_VERSION.dat.* > $FULL_BASE_PATH/GOWithHierarchy-CC-$PANTHER_VERSION.dat

rm -f $FULL_BASE_PATH/Pthr_GO_$PANTHER_VERSION.tsv.*
rm -f $FULL_BASE_PATH/GOWithHierarchy-BP-$PANTHER_VERSION.dat.*
rm -f $FULL_BASE_PATH/GOWithHierarchy-MF-$PANTHER_VERSION.dat.*
rm -f $FULL_BASE_PATH/GOWithHierarchy-CC-$PANTHER_VERSION.dat.*
rm -f $FULL_BASE_PATH/PthrGOLog_$PANTHER_VERSION.txt.*
